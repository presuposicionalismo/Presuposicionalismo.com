---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "@components/FormattedDate.astro";
import CoverBlog from "@components/CoverBlog.astro";
import { slugifyStr } from "@utils/slugify";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const postUrl = `/blog/${slugifyStr(post.data.title)}/`;
---

<article
  class="group animate-in-view flex flex-col h-full rounded-lg border border-border bg-card shadow-sm transition-all duration-300 hover:shadow-md"
>
  <div
    class="aspect-video w-full overflow-hidden border-b border-border relative"
  >
    <a href={postUrl} class="block h-full">
      <CoverBlog
        imagePath={String(post.data.heroImage)}
        altText={post.data.title}
        class="w-full h-full object-cover grayscale opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-500"
      />
    </a>
  </div>

  <div class="p-5 flex flex-col gap-3 flex-1">
    <span class="text-xs font-bold text-muted tracking-tighter uppercase">
      <FormattedDate date={post.data.pubDate} />
    </span>
    <h4
      class="serif-text text-xl text-accent font-medium leading-tight group-hover:text-primary transition-colors"
    >
      <a href={postUrl}>
        {post.data.title}
      </a>
    </h4>
  </div>
</article>
