---
import Grid from "../../components/GridBook.astro";
import MainLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import CoverBook from "@components/CoverBook.astro";

import { SITE_DESCRIPTION } from "../../consts";
const books = (await getCollection("libros")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<MainLayout
  title="Libros"
  description={SITE_DESCRIPTION}
  pubDate={new Date("August 08 2021")}
  heroImage="/blog-placeholder-about.jpg"
>
  <main class="max-w-7xl mx-auto px-6 py-20">
    <section class="text-center mb-16">
      <h1 class="serif-text text-4xl md:text-5xl font-medium text-accent mb-4">
        Libros
      </h1>
      <p class="text-lg text-muted max-w-2xl mx-auto">
        Colección de recursos apologéticos y teológicos reformados
      </p>
    </section>

    <section>
      <Grid>
        {
          books.map((book) => (
            <article class="group relative bg-surface rounded-lg overflow-hidden border border-border hover:border-accent/50 transition-all duration-300 hover:shadow-lg">
              <div class="aspect-[3/4] overflow-hidden">
                <CoverBook
                  imagePath={String(book.data.coverBook)}
                  altText={book.data.title}
                  transition:name={`coverbook ${book.data.title} image`}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                />
              </div>
              <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-background via-background/95 to-transparent p-6 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                <a href={`/libros/${book.id}/`}>
                  <h2 class="text-lg font-semibold text-accent mb-2 line-clamp-2">
                    {book.data.title}
                  </h2>
                  <p class="text-sm text-muted line-clamp-2">
                    {book.data.author}
                  </p>
                </a>
              </div>
            </article>
          ))
        }
      </Grid>
    </section>
  </main>
</MainLayout>
